--[[ 
    Cleaned LegitHub GUI
    - Removed WalkSpeed / JumpPower / Gravity controls
    - Safe: no key system, no Discord spam, no external loaders
]]

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")

local player = Players.LocalPlayer
local guiParent = CoreGui

local CLOSED_SZ = UDim2.new(0,1,0,1)
local ENTRY_SZ = UDim2.new(0,400,0,240)
local HUB_SZ = UDim2.new(0,700,0,450)
local MINIMIZED_SZ = UDim2.new(0,200,0,40)

local tweenInfo = TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
local function tween(obj, props)
    local tw = TweenService:Create(obj, tweenInfo, props)
    tw:Play()
    return tw
end

local function round(ui, radius)
    local c = Instance.new("UICorner", ui)
    c.CornerRadius = UDim.new(0, radius or 8)
end

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LegitHubGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = guiParent

local frame = Instance.new("Frame", screenGui)
frame.Name = "MainFrame"
frame.Size = CLOSED_SZ
frame.Position = UDim2.new(0.5,0,0.5,0)
frame.AnchorPoint = Vector2.new(0.5,0.5)
frame.BackgroundColor3 = Color3.fromRGB(20,20,20)
frame.Active = true
frame.BorderSizePixel = 0
round(frame,10)

-- dragging
local dragging, dragInput, dragStart, startPos
UserInputService.InputChanged:Connect(function(input)
    if input==dragInput and dragging then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(
            startPos.X.Scale, startPos.X.Offset+delta.X,
            startPos.Y.Scale, startPos.Y.Offset+delta.Y
        )
    end
end)

local function enableDrag(target)
    target.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
            dragging = true
            dragStart = i.Position
            startPos = frame.Position
            i.Changed:Connect(function()
                if i.UserInputState==Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    target.InputChanged:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch then
            dragInput = i
        end
    end)
end

-- rgb effect
local rgbActive, rgbConn = false, nil
local function startRGB()
    if rgbActive then return end
    rgbActive = true
    local hue=0
    rgbConn = RunService.Heartbeat:Connect(function(dt)
        hue=(hue+dt*0.2)%1
        frame.BackgroundColor3=Color3.fromHSV(hue,1,1)
    end)
end
local function stopRGB()
    if rgbConn then rgbConn:Disconnect() end
    rgbActive=false
    frame.BackgroundColor3=Color3.fromRGB(20,20,20)
end

local scriptStates, runningThreads = {},{}

-- build hub
local function buildHub()
    tween(frame,{Size=HUB_SZ}).Completed:Wait()
    for _,c in pairs(frame:GetChildren()) do if not c:IsA("UICorner") then c:Destroy() end end

    local bar=Instance.new("Frame",frame)
    bar.Size=UDim2.new(1,0,0,40)
    bar.Position=UDim2.new(0,0,0,0)
    bar.BackgroundColor3=Color3.fromRGB(40,40,40)
    bar.Active=true
    round(bar,10)
    enableDrag(bar)

    local title=Instance.new("TextLabel",bar)
    title.Size=UDim2.new(1,-120,1,0)
    title.Position=UDim2.new(0,10,0,0)
    title.BackgroundTransparency=1
    title.Font=Enum.Font.SourceSansBold
    title.TextSize=24
    title.Text="Legit hub"
    title.TextColor3=Color3.new(1,1,1)
    title.TextXAlignment=Enum.TextXAlignment.Left

    local closeBtn=Instance.new("TextButton",bar)
    closeBtn.Size=UDim2.new(0,30,0,30)
    closeBtn.Position=UDim2.new(1,-40,0,5)
    closeBtn.Text="X"
    closeBtn.Font=Enum.Font.SourceSansBold
    closeBtn.TextSize=18
    closeBtn.BackgroundColor3=Color3.fromRGB(200,50,50)
    closeBtn.TextColor3=Color3.new(1,1,1)
    round(closeBtn,4)

    local minBtn=Instance.new("TextButton",bar)
    minBtn.Size=UDim2.new(0,30,0,30)
    minBtn.Position=UDim2.new(1,-80,0,5)
    minBtn.Text="-"
    minBtn.Font=Enum.Font.SourceSansBold
    minBtn.TextSize=22
    minBtn.BackgroundColor3=Color3.fromRGB(100,100,100)
    minBtn.TextColor3=Color3.new(1,1,1)
    round(minBtn,4)

    local tabsFrame=Instance.new("Frame",frame)
    tabsFrame.Size=UDim2.new(0,140,1,-60)
    tabsFrame.Position=UDim2.new(0,0,0,50)
    tabsFrame.BackgroundTransparency=1

    local contentFrame=Instance.new("Frame",frame)
    contentFrame.Size=UDim2.new(1,-140,1,-60)
    contentFrame.Position=UDim2.new(0,140,0,50)
    contentFrame.BackgroundTransparency=1
    enableDrag(contentFrame)

    local tabNames={"SB","Stats","Badges","Misc","Credits"}
    local tabButtons={}

    local function selectTab(idx)
        for _,v in pairs(contentFrame:GetChildren()) do v:Destroy() end
        for i,btn in ipairs(tabButtons) do
            btn.BackgroundColor3 = (i==idx) and Color3.fromRGB(80,80,80) or Color3.fromRGB(50,50,50)
        end
        if idx==1 then
            local label=Instance.new("TextLabel",contentFrame)
            label.Size=UDim2.new(1,-20,0,50)
            label.Position=UDim2.new(0,10,0,10)
            label.BackgroundTransparency=1
            label.Text="SB Tab (empty placeholder)"
            label.TextColor3=Color3.new(1,1,1)
            label.Font=Enum.Font.SourceSansBold
            label.TextSize=20
        elseif idx==2 then
            local y=0
            local ls = player:FindFirstChild("leaderstats")
            if ls then
                for _,stat in ipairs(ls:GetChildren()) do
                    local lbl=Instance.new("TextLabel",contentFrame)
                    lbl.Size=UDim2.new(1,-20,0,30)
                    lbl.Position=UDim2.new(0,10,0,10+y)
                    lbl.BackgroundTransparency=1
                    lbl.Text=stat.Name..": "..tostring(stat.Value)
                    lbl.TextColor3=Color3.new(1,1,1)
                    lbl.Font=Enum.Font.SourceSansBold
                    lbl.TextSize=18
                    y=y+40
                end
            else
                local lbl=Instance.new("TextLabel",contentFrame)
                lbl.Size=UDim2.new(1,-20,0,30)
                lbl.Position=UDim2.new(0,10,0,10)
                lbl.BackgroundTransparency=1
                lbl.Text="No leaderstats found."
                lbl.TextColor3=Color3.new(1,1,1)
                lbl.Font=Enum.Font.SourceSansBold
                lbl.TextSize=18
            end
        elseif idx==3 then
            local label=Instance.new("TextLabel",contentFrame)
            label.Size=UDim2.new(1,-20,0,50)
            label.Position=UDim2.new(0,10,0,10)
            label.BackgroundTransparency=1
            label.Text="Badges tab coming soon!"
            label.TextColor3=Color3.new(1,1,1)
            label.Font=Enum.Font.SourceSansBold
            label.TextSize=22
        elseif idx==4 then
            local names={"RGB MENU","SEE THRU MENU"}
            for i,name in ipairs(names) do
                local id=i
                scriptStates[id]=scriptStates[id] or false
                local btn=Instance.new("TextButton",contentFrame)
                btn.Size=UDim2.new(1,0,0,50)
                btn.Position=UDim2.new(0,0,0,(i-1)*60)
                btn.Text=name..(scriptStates[id] and" [ON]" or" [OFF]")
                btn.Font=Enum.Font.SourceSansBold
                btn.TextSize=20
                round(btn,6)
                btn.BackgroundColor3=(scriptStates[id] and Color3.fromRGB(80,80,80) or Color3.fromRGB(50,50,50))
                btn.TextColor3=Color3.new(1,1,1)
                btn.MouseButton1Click:Connect(function()
                    scriptStates[id]=not scriptStates[id]
                    if scriptStates[id] then
                        if id==1 then startRGB() end
                        if id==2 then frame.BackgroundTransparency=0.75 end
                    else
                        if id==1 then stopRGB() end
                        if id==2 then frame.BackgroundTransparency=0 end
                    end
                    btn.Text=name..(scriptStates[id] and" [ON]"or" [OFF]")
                    btn.BackgroundColor3=(scriptStates[id] and Color3.fromRGB(80,80,80) or Color3.fromRGB(50,50,50))
                end)
            end
        elseif idx==5 then
            local label=Instance.new("TextLabel",contentFrame)
            label.Size=UDim2.new(1,-20,0,50)
            label.Position=UDim2.new(0,10,0,10)
            label.BackgroundTransparency=1
            label.Text="D1.3"
            label.TextColor3=Color3.new(1,1,1)
            label.Font=Enum.Font.SourceSansBold
            label.TextSize=22
        end
    end

    for i,name in ipairs(tabNames) do
        local btn=Instance.new("TextButton",tabsFrame)
        btn.Size=UDim2.new(1,0,0,40)
        btn.Position=UDim2.new(0,0,0,(i-1)*45)
        btn.Text=name
        btn.Font=Enum.Font.SourceSansBold
        btn.TextSize=20
        round(btn,6)
        btn.BackgroundColor3=(i==1 and Color3.fromRGB(80,80,80) or Color3.fromRGB(50,50,50))
        btn.TextColor3=Color3.new(1,1,1)
        btn.MouseButton1Click:Connect(function() selectTab(i) end)
        table.insert(tabButtons,btn)
    end

    selectTab(1)

    local minimized=false
    minBtn.MouseButton1Click:Connect(function()
        minimized = not minimized
        tween(frame,{Size=(minimized and MINIMIZED_SZ or HUB_SZ)})
        tabsFrame.Visible = not minimized
        contentFrame.Visible = not minimized
    end)
    closeBtn.MouseButton1Click:Connect(function()
        tween(frame,{Size=CLOSED_SZ}).Completed:Wait()
        screenGui:Destroy()
    end)
end

-- Launch hub immediately
buildHub()
-- Tab buttons container
local TabContainer = Instance.new("Frame", MainFrame)
TabContainer.Size = UDim2.new(0, 100, 1, -40)
TabContainer.Position = UDim2.new(0, 0, 0, 40)
TabContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

-- Content frame
local ContentFrame = Instance.new("Frame", MainFrame)
ContentFrame.Size = UDim2.new(1, -100, 1, -40)
ContentFrame.Position = UDim2.new(0, 100, 0, 40)
ContentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Tabs
local tabNames = {"SB", "Stats", "Badges", "Misc", "Credits"}
local activeTab = nil

local function switchTab(name)
    ContentFrame:ClearAllChildren()

    if name == "SB" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Slap Battles scripts placeholder"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSans
    elseif name == "Stats" then
        local char = player.Character or player.CharacterAdded:Wait()
        local hum = char:WaitForChild("Humanoid")

        local y = 10

        local function addLabel(txt)
            local l = Instance.new("TextLabel", ContentFrame)
            l.Size = UDim2.new(1, -10, 0, 20)
            l.Position = UDim2.new(0, 5, 0, y)
            l.TextXAlignment = Enum.TextXAlignment.Left
            l.BackgroundTransparency = 1
            l.Font = Enum.Font.SourceSans
            l.TextSize = 18
            l.TextColor3 = Color3.new(1,1,1)
            l.Text = txt
            y = y + 25
        end

        -- Player info
        addLabel("Display Name: "..player.DisplayName)
        addLabel("UserId: "..player.UserId)
        addLabel("Account Age: "..player.AccountAge.." days")
        addLabel("Membership: "..tostring(player.MembershipType))

        -- Humanoid info
        addLabel("Health: "..math.floor(hum.Health).."/"..math.floor(hum.MaxHealth))
        addLabel("WalkSpeed: "..hum.WalkSpeed)
        addLabel("JumpPower: "..hum.JumpPower)

        -- Leaderstats
        if player:FindFirstChild("leaderstats") then
            for _, stat in ipairs(player.leaderstats:GetChildren()) do
                addLabel(stat.Name..": "..tostring(stat.Value))
            end
        end
    elseif name == "Badges" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Badges coming soon"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSans
    elseif name == "Misc" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Misc settings placeholder"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSans
    elseif name == "Credits" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Hub v1.0\nCreated by You"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSansBold
    end
end

-- Create tab buttons
for i, name in ipairs(tabNames) do
    local b = Instance.new("TextButton", TabContainer)
    b.Size = UDim2.new(1, 0, 0, 40)
    b.Position = UDim2.new(0, 0, 0, (i-1)*40)
    b.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    b.Text = name
    b.TextColor3 = Color3.new(1,1,1)
    b.TextScaled = true
    b.Font = Enum.Font.SourceSansBold

    b.MouseButton1Click:Connect(function()
        switchTab(name)
    end)

    if i == 1 then
        switchTab(name)
    end
end
