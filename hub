--[[ 
   Safe Custom Hub (Cleaned)
   - No key system
   - No external loaders
   - Local tab removed
   - Stats tab auto-detects Player info, Humanoid info, Leaderstats
--]]

local player = game.Players.LocalPlayer
local TweenService = game:GetService("TweenService")

-- GUI setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SafeHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 400, 0, 300)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Visible = true

-- Title
local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Title.Text = "Custom Hub"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.TextScaled = true
Title.Font = Enum.Font.SourceSansBold

-- Close button
local CloseButton = Instance.new("TextButton", Title)
CloseButton.Size = UDim2.new(0, 40, 1, 0)
CloseButton.Position = UDim2.new(1, -40, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.Text = "X"
CloseButton.TextScaled = true
CloseButton.Font = Enum.Font.SourceSansBold

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Minimize button
local MinButton = Instance.new("TextButton", Title)
MinButton.Size = UDim2.new(0, 40, 1, 0)
MinButton.Position = UDim2.new(1, -80, 0, 0)
MinButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
MinButton.Text = "-"
MinButton.TextScaled = true
MinButton.Font = Enum.Font.SourceSansBold

local minimized = false
MinButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 400, 0, 40)}):Play()
    else
        TweenService:Create(MainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 400, 0, 300)}):Play()
    end
end)

-- Tab buttons container
local TabContainer = Instance.new("Frame", MainFrame)
TabContainer.Size = UDim2.new(0, 100, 1, -40)
TabContainer.Position = UDim2.new(0, 0, 0, 40)
TabContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

-- Content frame
local ContentFrame = Instance.new("Frame", MainFrame)
ContentFrame.Size = UDim2.new(1, -100, 1, -40)
ContentFrame.Position = UDim2.new(0, 100, 0, 40)
ContentFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)

-- Tabs
local tabNames = {"SB", "Stats", "Badges", "Misc", "Credits"}
local activeTab = nil

local function switchTab(name)
    ContentFrame:ClearAllChildren()

    if name == "SB" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Slap Battles scripts placeholder"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSans
    elseif name == "Stats" then
        local char = player.Character or player.CharacterAdded:Wait()
        local hum = char:WaitForChild("Humanoid")

        local y = 10

        local function addLabel(txt)
            local l = Instance.new("TextLabel", ContentFrame)
            l.Size = UDim2.new(1, -10, 0, 20)
            l.Position = UDim2.new(0, 5, 0, y)
            l.TextXAlignment = Enum.TextXAlignment.Left
            l.BackgroundTransparency = 1
            l.Font = Enum.Font.SourceSans
            l.TextSize = 18
            l.TextColor3 = Color3.new(1,1,1)
            l.Text = txt
            y = y + 25
        end

        -- Player info
        addLabel("Display Name: "..player.DisplayName)
        addLabel("UserId: "..player.UserId)
        addLabel("Account Age: "..player.AccountAge.." days")
        addLabel("Membership: "..tostring(player.MembershipType))

        -- Humanoid info
        addLabel("Health: "..math.floor(hum.Health).."/"..math.floor(hum.MaxHealth))
        addLabel("WalkSpeed: "..hum.WalkSpeed)
        addLabel("JumpPower: "..hum.JumpPower)

        -- Leaderstats
        if player:FindFirstChild("leaderstats") then
            for _, stat in ipairs(player.leaderstats:GetChildren()) do
                addLabel(stat.Name..": "..tostring(stat.Value))
            end
        end
    elseif name == "Badges" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Badges coming soon"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSans
    elseif name == "Misc" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Misc settings placeholder"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSans
    elseif name == "Credits" then
        local l = Instance.new("TextLabel", ContentFrame)
        l.Size = UDim2.new(1, 0, 1, 0)
        l.BackgroundTransparency = 1
        l.Text = "Hub v1.0\nCreated by You"
        l.TextColor3 = Color3.new(1, 1, 1)
        l.TextScaled = true
        l.Font = Enum.Font.SourceSansBold
    end
end

-- Create tab buttons
for i, name in ipairs(tabNames) do
    local b = Instance.new("TextButton", TabContainer)
    b.Size = UDim2.new(1, 0, 0, 40)
    b.Position = UDim2.new(0, 0, 0, (i-1)*40)
    b.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    b.Text = name
    b.TextColor3 = Color3.new(1,1,1)
    b.TextScaled = true
    b.Font = Enum.Font.SourceSansBold

    b.MouseButton1Click:Connect(function()
        switchTab(name)
    end)

    if i == 1 then
        switchTab(name)
    end
end
