--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")

--// Player
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

--// GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AutoHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 400, 0, 300)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MainFrame.BorderSizePixel = 0
MainFrame.Active = true
MainFrame.Draggable = true
MainFrame.Parent = ScreenGui

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 30)
TitleBar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -60, 1, 0)
TitleLabel.Position = UDim2.new(0, 5, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "Auto Hub"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextSize = 14
TitleLabel.Parent = TitleBar

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 1, 0)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 14
CloseButton.Parent = TitleBar

-- Minimize Button
local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 30, 1, 0)
MinimizeButton.Position = UDim2.new(1, -60, 0, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
MinimizeButton.Text = "-"
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 14
MinimizeButton.Parent = TitleBar

-- Tabs Frame
local TabsFrame = Instance.new("Frame")
TabsFrame.Size = UDim2.new(0, 100, 1, -30)
TabsFrame.Position = UDim2.new(0, 0, 0, 30)
TabsFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TabsFrame.BorderSizePixel = 0
TabsFrame.Parent = MainFrame

-- Content Frame
local ContentFrame = Instance.new("Frame")
ContentFrame.Size = UDim2.new(1, -100, 1, -30)
ContentFrame.Position = UDim2.new(0, 100, 0, 30)
ContentFrame.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
ContentFrame.BorderSizePixel = 0
ContentFrame.Parent = MainFrame

-- Tab Button Template
local function createTabButton(name, yPos)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 30)
    btn.Position = UDim2.new(0, 0, 0, yPos)
    btn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 12
    btn.Parent = TabsFrame
    return btn
end

-- State Vars
local mining = false
local spinning = false
local autoWin = false
local rewardStates = {} -- per reward
local eggStates = {}    -- per egg
local rewardButtons = {}
local eggButtons = {}

-- Helper to build content
local function clearContent()
    for _, c in ipairs(ContentFrame:GetChildren()) do
        c:Destroy()
    end
end

-- Auto Mine Tab
local function buildMineTab()
    clearContent()
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8, 0, 0, 50)
    btn.Position = UDim2.new(0.1, 0, 0.1, 0)
    btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    btn.Text = "Auto Mine: OFF"
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.Parent = ContentFrame

    btn.MouseButton1Click:Connect(function()
        mining = not mining
        btn.Text = mining and "Auto Mine: ON" or "Auto Mine: OFF"
        btn.BackgroundColor3 = mining and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(100, 100, 100)
    end)
end

-- Auto Spin Tab
local function buildWheelTab()
    clearContent()
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8, 0, 0, 50)
    btn.Position = UDim2.new(0.1, 0, 0.1, 0)
    btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    btn.Text = "Auto Spin: OFF"
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.Parent = ContentFrame

    btn.MouseButton1Click:Connect(function()
        spinning = not spinning
        btn.Text = spinning and "Auto Spin: ON" or "Auto Spin: OFF"
        btn.BackgroundColor3 = spinning and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(100, 100, 100)
    end)
end

-- Rewards Tab
local function buildRewardsTab()
    clearContent()
    local UIListLayout = Instance.new("UIListLayout")
    UIListLayout.Padding = UDim.new(0, 5)
    UIListLayout.Parent = ContentFrame

    for i = 1, 5 do
        rewardStates[i] = false
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 0, 40)
        btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        btn.Text = "Reward " .. i .. ": OFF"
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 14
        btn.Parent = ContentFrame
        rewardButtons[i] = btn

        btn.MouseButton1Click:Connect(function()
            rewardStates[i] = not rewardStates[i]
            btn.Text = "Reward " .. i .. ": " .. (rewardStates[i] and "ON" or "OFF")
            btn.BackgroundColor3 = rewardStates[i] and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(100, 100, 100)
        end)
    end
end

-- Teleport Tab
local function buildTeleportTab()
    clearContent()
    local places = {"Spawn", "Mine", "Shop", "Arena"}
    local UIListLayout = Instance.new("UIListLayout")
    UIListLayout.Padding = UDim.new(0, 5)
    UIListLayout.Parent = ContentFrame

    for _, place in ipairs(places) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 0, 40)
        btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        btn.Text = "Teleport: " .. place
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 14
        btn.Parent = ContentFrame
    end
end

-- Eggs Tab
local function buildEggsTab()
    clearContent()
    local eggs = {"Basic", "Epic", "Legendary", "Mythic"}
    local UIListLayout = Instance.new("UIListLayout")
    UIListLayout.Padding = UDim.new(0, 5)
    UIListLayout.Parent = ContentFrame

    for i, egg in ipairs(eggs) do
        eggStates[i] = false
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1, 0, 0, 40)
        btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        btn.Text = egg .. " Egg: OFF"
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        btn.Font = Enum.Font.Gotham
        btn.TextSize = 14
        btn.Parent = ContentFrame
        eggButtons[i] = btn

        btn.MouseButton1Click:Connect(function()
            eggStates[i] = not eggStates[i]
            btn.Text = egg .. " Egg: " .. (eggStates[i] and "ON" or "OFF")
            btn.BackgroundColor3 = eggStates[i] and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(100, 100, 100)
        end)
    end
end

-- Auto Win Tab
local function buildWinTab()
    clearContent()
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8, 0, 0, 50)
    btn.Position = UDim2.new(0.1, 0, 0.1, 0)
    btn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    btn.Text = "Auto Win: OFF"
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 14
    btn.Parent = ContentFrame

    btn.MouseButton1Click:Connect(function()
        autoWin = not autoWin
        btn.Text = autoWin and "Auto Win: ON" or "Auto Win: OFF"
        btn.BackgroundColor3 = autoWin and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(100, 100, 100)
    end)
end

-- Emergency Stop Tab
local function buildEmergencyTab()
    clearContent()
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0.8, 0, 0, 60)
    btn.Position = UDim2.new(0.1, 0, 0.2, 0)
    btn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    btn.Text = "EMERGENCY STOP"
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.Parent = ContentFrame

    btn.MouseButton1Click:Connect(function()
        -- reset all states
        mining = false
        spinning = false
        autoWin = false

        for i,_ in ipairs(rewardStates) do
            rewardStates[i] = false
            if rewardButtons[i] then
                rewardButtons[i].Text = "Reward " .. i .. ": OFF"
                rewardButtons[i].BackgroundColor3 = Color3.fromRGB(100,100,100)
            end
        end

        for i,_ in ipairs(eggStates) do
            eggStates[i] = false
            if eggButtons[i] then
                local eggName = eggButtons[i].Text:match("^(.-) Egg")
                eggButtons[i].Text = (eggName or "Egg") .. " Egg: OFF"
                eggButtons[i].BackgroundColor3 = Color3.fromRGB(100,100,100)
            end
        end
    end)
end

-- Tab Buttons
local buttons = {
    { "Mine", buildMineTab },
    { "Wheel", buildWheelTab },
    { "Rewards", buildRewardsTab },
    { "Teleport", buildTeleportTab },
    { "Eggs", buildEggsTab },
    { "AutoWin", buildWinTab },
    { "STOP", buildEmergencyTab }
}

local tabButtons = {}
for i, data in ipairs(buttons) do
    local btn = createTabButton(data[1], (i-1)*30)
    tabButtons[i] = btn
    btn.MouseButton1Click:Connect(function()
        for _, b in ipairs(tabButtons) do
            b.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        end
        btn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
        data[2]()
    end)
end

-- Open default
buttons[1][2]()
tabButtons[1].BackgroundColor3 = Color3.fromRGB(80,80,80)

-- Close/Minimize logic
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

local minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    local goalSize = minimized and UDim2.new(0, 400, 0, 30) or UDim2.new(0, 400, 0, 300)
    TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Sine), {Size = goalSize}):Play()
end)
