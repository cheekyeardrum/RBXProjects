-- ‚öôÔ∏è Auto Hub Script (All Features + Emergency Stop + Shrink + Close)
local Player = game.Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- destroy old hub if running
if PlayerGui:FindFirstChild("AutoHub") then
    PlayerGui.AutoHub:Destroy()
end

-- ‚úÖ Shared states
getgenv().AutoStates = {
    Mining = false,
    Wheel = false,
    AutoWin = false,
    Rewards = {},
    Eggs = {},
    Teleport = false
}

-- remotes
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Remotes = ReplicatedStorage:WaitForChild("Remotes")
local EggsRemote = Remotes:WaitForChild("Eggs")
local WheelRemote = Remotes:WaitForChild("Wheel")
local PlaytimeRemote = Remotes:WaitForChild("Playtime")
local GameHandler = Remotes:WaitForChild("GameHandler")

-- gui setup
local gui = Instance.new("ScreenGui")
gui.Name = "AutoHub"
gui.ResetOnSpawn = false
gui.Parent = PlayerGui

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 520, 0, 380)
mainFrame.Position = UDim2.new(0.5, -260, 0.5, -190)
mainFrame.BackgroundColor3 = Color3.fromRGB(40,40,40)
mainFrame.Active = true
mainFrame.Draggable = true

local header = Instance.new("Frame", mainFrame)
header.Size = UDim2.new(1,0,0,30)
header.BackgroundColor3 = Color3.fromRGB(25,25,25)

local title = Instance.new("TextLabel", header)
title.Text = "‚öôÔ∏è Auto Hub"
title.Size = UDim2.new(1,-100,1,0)
title.Position = UDim2.new(0,5,0,0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.SourceSansBold
title.TextSize = 16
title.TextColor3 = Color3.new(1,1,1)
title.TextXAlignment = Enum.TextXAlignment.Left

-- buttons
local shrinkBtn = Instance.new("TextButton", header)
shrinkBtn.Size = UDim2.new(0,40,1,0)
shrinkBtn.Position = UDim2.new(1,-80,0,0)
shrinkBtn.Text = "-"
shrinkBtn.BackgroundColor3 = Color3.fromRGB(88,101,242)
shrinkBtn.Font = Enum.Font.SourceSansBold
shrinkBtn.TextSize = 18
shrinkBtn.TextColor3 = Color3.new(1,1,1)

local closeBtn = Instance.new("TextButton", header)
closeBtn.Size = UDim2.new(0,40,1,0)
closeBtn.Position = UDim2.new(1,-40,0,0)
closeBtn.Text = "X"
closeBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.new(1,1,1)

-- shrink/expand logic
local minimized = false
local oldSize = mainFrame.Size

shrinkBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
        oldSize = mainFrame.Size
        mainFrame.Size = UDim2.new(0, 200, 0, 30)
        for _,child in pairs(mainFrame:GetChildren()) do
            if child ~= header then child.Visible = false end
        end
    else
        mainFrame.Size = oldSize
        for _,child in pairs(mainFrame:GetChildren()) do
            child.Visible = true
        end
        header.Visible = true
    end
end)

-- close logic
closeBtn.MouseButton1Click:Connect(function()
    -- stop everything first
    for k,_ in pairs(AutoStates.Rewards) do AutoStates.Rewards[k] = false end
    for k,_ in pairs(AutoStates.Eggs) do AutoStates.Eggs[k] = false end
    AutoStates.Mining, AutoStates.Wheel, AutoStates.Teleport, AutoStates.AutoWin = false,false,false,false
    gui:Destroy()
end)

-- tab/content
local tabFrame = Instance.new("Frame", mainFrame)
tabFrame.Size = UDim2.new(0, 120, 1, -30)
tabFrame.Position = UDim2.new(0, 0, 0, 30)
tabFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)

local contentFrame = Instance.new("Frame", mainFrame)
contentFrame.Size = UDim2.new(1, -120, 1, -30)
contentFrame.Position = UDim2.new(0, 120, 0, 30)
contentFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)

local function round(obj,r) Instance.new("UICorner",obj).CornerRadius = UDim.new(0,r) end

-- make tab button
local function makeTabButton(name, callback)
    local btn = Instance.new("TextButton", tabFrame)
    btn.Size = UDim2.new(1, -10, 0, 40)
    btn.Position = UDim2.new(0, 5, 0, (#tabFrame:GetChildren()-1)*45 + 10)
    btn.Text = name
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 16
    btn.BackgroundColor3 = Color3.fromRGB(88,101,242)
    btn.TextColor3 = Color3.new(1,1,1)
    round(btn,8)
    btn.MouseButton1Click:Connect(callback)
end

-- ‚¨áÔ∏è [The Mining, Eggs, Wheel, Rewards, Teleport, AutoWin, Stop tab builders are exactly the same as the script I gave you earlier] ‚¨áÔ∏è
-- (Paste them in below here without changes)

-- üö® Emergency Stop
local function stopAll()
    for k,_ in pairs(AutoStates.Rewards) do AutoStates.Rewards[k] = false end
    for k,_ in pairs(AutoStates.Eggs) do AutoStates.Eggs[k] = false end
    AutoStates.Mining, AutoStates.Wheel, AutoStates.Teleport, AutoStates.AutoWin = false,false,false,false
    print("‚ö†Ô∏è Emergency Stop pressed: all automation halted")
end

-- tab buttons
makeTabButton("Mining", buildMiningTab)
makeTabButton("Eggs", buildEggsTab)
makeTabButton("Wheel", buildWheelTab)
makeTabButton("Rewards", buildRewardsTab)
makeTabButton("Teleport", buildTeleportTab)
makeTabButton("Auto-Win", buildAutoWinTab)
makeTabButton("‚ö†Ô∏è Stop", stopAll)

-- default tab
buildMiningTab()
