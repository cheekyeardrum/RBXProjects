-- Cheeky Hub V1.0 Ultimate with Tabs
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer
local guiParent = game:GetService("CoreGui")

-- Sizes
local HUB_SZ = UDim2.new(0,700,0,450)
local MINIMIZED_SZ = UDim2.new(0,200,0,40)
local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

-- Helper Functions
local function tween(obj,props)
    local tw = TweenService:Create(obj,tweenInfo,props)
    tw:Play()
    return tw
end
local function round(ui,radius)
    local c = Instance.new("UICorner",ui)
    c.CornerRadius = UDim.new(0,radius or 8)
end

-- ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CheekyHubGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = guiParent

-- Main Frame
local frame = Instance.new("Frame",screenGui)
frame.Size = HUB_SZ
frame.Position = UDim2.new(0.5,0,0.5,0)
frame.AnchorPoint = Vector2.new(0.5,0.5)
frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
frame.BorderSizePixel = 0
round(frame,16)

-- Neon Edge & Shadow
local edge = Instance.new("UIStroke",frame)
edge.Color = Color3.fromRGB(0,255,180)
edge.Thickness = 3
edge.Transparency = 0.3
edge.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

local shadow = Instance.new("Frame",screenGui)
shadow.Size = frame.Size
shadow.Position = frame.Position
shadow.AnchorPoint = frame.AnchorPoint
shadow.BackgroundColor3 = Color3.fromRGB(0,255,180)
shadow.BackgroundTransparency = 0.95
shadow.ZIndex = frame.ZIndex - 1
round(shadow,18)

-- Dragging
local dragging, dragInput, dragStart, startPos
UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y)
        shadow.Position = frame.Position
    end
end)
local function enableDrag(target)
    target.InputBegan:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then
            dragging = true
            dragStart = i.Position
            startPos = frame.Position
            i.Changed:Connect(function()
                if i.UserInputState==Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    target.InputChanged:Connect(function(i)
        if i.UserInputType==Enum.UserInputType.MouseMovement or i.UserInputType==Enum.UserInputType.Touch then
            dragInput = i
        end
    end)
end
enableDrag(frame)

-- Top Bar
local bar = Instance.new("Frame",frame)
bar.Size = UDim2.new(1,0,0,40)
bar.Position = UDim2.new(0,0,0,0)
bar.BackgroundColor3 = Color3.fromRGB(25,25,25)
bar.BorderSizePixel = 0
round(bar,16)
enableDrag(bar)

local title = Instance.new("TextLabel",bar)
title.Size = UDim2.new(1,-160,1,0)
title.Position = UDim2.new(0,15,0,0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.Text = "Cheeky Hub V1.0 Ultimate"
title.TextColor3 = Color3.fromRGB(0,255,180)
title.TextXAlignment = Enum.TextXAlignment.Left

-- Close & Minimize
local function createButton(parent,text,posX,color,callback)
    local btn = Instance.new("TextButton",parent)
    btn.Size = UDim2.new(0,30,0,30)
    btn.Position = UDim2.new(1,posX,0,5)
    btn.BackgroundColor3 = color
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 18
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    round(btn,6)
    btn.MouseButton1Click:Connect(callback)
end
createButton(bar,"X",-40,Color3.fromRGB(180,50,50),function() screenGui:Destroy() end)
createButton(bar,"-",-80,Color3.fromRGB(80,80,80),function()
    if frame.Size==HUB_SZ then tween(frame,{Size=MINIMIZED_SZ}) tween(shadow,{Size=MINIMIZED_SZ})
    else tween(frame,{Size=HUB_SZ}) tween(shadow,{Size=HUB_SZ}) end
end)

-- Content Frame
local contentFrame = Instance.new("Frame",frame)
contentFrame.Size = UDim2.new(1,-20,1,-60)
contentFrame.Position = UDim2.new(0,10,0,50)
contentFrame.BackgroundTransparency = 1

-- Tabs Frame
local tabsFrame = Instance.new("Frame",frame)
tabsFrame.Size = UDim2.new(1,-20,0,30)
tabsFrame.Position = UDim2.new(0,10,0,10)
tabsFrame.BackgroundTransparency = 1

local tabs = {}
local pages = {}
local activePage

local function createTab(name)
    local idx = #tabs + 1
    local btn = Instance.new("TextButton",tabsFrame)
    btn.Size = UDim2.new(0,140,1,0)
    btn.Position = UDim2.new(0,(idx-1)*145,0,0)
    btn.BackgroundColor3 = Color3.fromRGB(40,40,40)
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.Text = name
    btn.TextColor3 = Color3.fromRGB(0,255,180)
    round(btn,6)
    local page = Instance.new("Frame",contentFrame)
    page.Size = UDim2.new(1,0,1,0)
    page.Position = UDim2.new(0,0,0,0)
    page.BackgroundTransparency = 1
    page.Visible = false
    tabs[name] = btn
    pages[name] = page
    btn.MouseButton1Click:Connect(function()
        if activePage then activePage.Visible=false end
        page.Visible=true
        activePage=page
    end)
    return page
end

-- Create Pages
local playerPage = createTab("Player")
local autoPage = createTab("Auto")
local teleportPage = createTab("Teleports")
local miscPage = createTab("Misc")
tabs["Player"]:GetPropertyChangedSignal("Text") -- just to avoid linter warnings

-- ----------------------
-- PLAYER PAGE CONTROLS
-- ----------------------
local function createSlider(parent,text,min,max,default,callback)
    local sliderLbl = Instance.new("TextLabel",parent)
    sliderLbl.Size = UDim2.new(0,200,0,20)
    sliderLbl.Position = UDim2.new(0,10,#parent:GetChildren()*25)
    sliderLbl.Text = text.." "..default
    sliderLbl.BackgroundTransparency = 1
    sliderLbl.Font = Enum.Font.Gotham
    sliderLbl.TextSize = 16
    sliderLbl.TextColor3 = Color3.fromRGB(0,255,180)
    local slider = Instance.new("TextBox",parent)
    slider.Size = UDim2.new(0,200,0,20)
    slider.Position = UDim2.new(0,10,#parent:GetChildren()*25)
    slider.Text = tostring(default)
    slider.TextColor3 = Color3.fromRGB(0,255,180)
    slider.BackgroundColor3 = Color3.fromRGB(30,30,30)
    round(slider,6)
    slider.FocusLost:Connect(function()
        local v = tonumber(slider.Text) or default
        if v<min then v=min end
        if v>max then v=max end
        sliderLbl.Text = text.." "..v
        callback(v)
    end)
end

local function createToggle(parent,text,default)
    local btn = Instance.new("TextButton",parent)
    btn.Size = UDim2.new(0,200,0,30)
    btn.Position = UDim2.new(0,10,#parent:GetChildren()*35)
    btn.Text = text.." [OFF]"
    btn.BackgroundColor3 = Color3.fromRGB(60,60,60)
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Font = Enum.Font.Gotham
    btn.TextSize = 16
    round(btn,6)
    local state = default or false
    btn.MouseButton1Click:Connect(function()
        state = not state
        btn.Text = text.." ["..(state and "ON" or "OFF").."]"
        btn.BackgroundColor3 = state and Color3.fromRGB(0,150,0) or Color3.fromRGB(60,60,60)
    end)
    return btn,function() return state end
end

-- Player Page Sliders
createSlider(playerPage,"WalkSpeed",16,300,16,function(v)
    local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if hum then pcall(function() hum.WalkSpeed=v end) end
end)
createSlider(playerPage,"JumpPower",50,500,50,function(v)
    local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
    if hum then pcall(function() hum.JumpPower=v end) end
end)
local infBtn,infGet = createToggle(playerPage,"Infinite Jump",false)
UserInputService.JumpRequest:Connect(function()
    if infGet() then
        local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
        if hum then pcall(function() hum:ChangeState(Enum.HumanoidStateType.Jumping) end) end
    end
end)
local noclipBtn,noclipGet = createToggle(playerPage,"Noclip",false)
RunService.Stepped:Connect(function()
    if noclipGet() and player.Character then
        for _,p in ipairs(player.Character:GetDescendants()) do
            if p:IsA("BasePart") then p.CanCollide=false end
        end
    end
end)

-- Fly
local flyBtn,flyGet = createToggle(playerPage,"Fly",false)
local flySpeed = 80
createSlider(playerPage,"Fly Speed",50,300,80,function(v) flySpeed=v end)
local flyVel
RunService.RenderStepped:Connect(function()
    if flyGet() and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = player.Character.HumanoidRootPart
        if not flyVel or not flyVel.Parent then
            flyVel = Instance.new("BodyVelocity")
            flyVel.MaxForce = Vector3.new(1e5,1e5,1e5)
            flyVel.Velocity = Vector3.new(0,0,0)
            flyVel.Parent = hrp
        end
        local dir = Vector3.new()
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + workspace.CurrentCamera.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - workspace.CurrentCamera.CFrame.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - workspace.CurrentCamera.CFrame.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + workspace.CurrentCamera.CFrame.RightVector end
        flyVel.Velocity = (dir.Magnitude>0.1) and dir.Unit*flySpeed or Vector3.new(0,0,0)
    else
        if flyVel and flyVel.Parent then flyVel:Destroy(); flyVel=nil end
    end
end)

-- ----------------------
-- AUTO PAGE CONTROLS
-- ----------------------
local clickBtn,clickGet = createToggle(autoPage,"Auto Clicker",false)
local clickSpeed = 5
createSlider(autoPage,"Click Speed",1,50,5,function(v) clickSpeed=v end)
spawn(function()
    while true do
        if clickGet() then
            pcall(function()
                if ReplicatedStorage:FindFirstChild("Remotes") and ReplicatedStorage.Remotes:FindFirstChild("Clicker") then
                    ReplicatedStorage.Remotes.Clicker:FireServer()
                end
            end)
            task.wait(1/clickSpeed)
        else task.wait(0.1) end
    end
end)

local collectBtn,collectGet = createToggle(autoPage,"Auto Collect",false)
spawn(function()
    while true do
        if collectGet() and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            for _,item in ipairs(workspace:GetChildren()) do
                if item:IsA("BasePart") and (item.Position - player.Character.HumanoidRootPart.Position).Magnitude < 20 then
                    player.Character.HumanoidRootPart.CFrame = CFrame.new(item.Position + Vector3.new(0,3,0))
                end
            end
        end
        task.wait(0.5)
    end
end)

-- ----------------------
-- TELEPORT PAGE CONTROLS
-- ----------------------
local tpBtn,tpGet = createToggle(teleportPage,"Teleport to Player",false)
spawn(function()
    while true do
        if tpGet() then
            local nearest,dist = nil,math.huge
            for _,plr in ipairs(Players:GetPlayers()) do
                if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                    local d = (plr.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                    if d<dist then nearest=plr; dist=d end
                end
            end
            if nearest then
                player.Character.HumanoidRootPart.CFrame = nearest.Character.HumanoidRootPart.CFrame + Vector3.new(0,3,0)
            end
        end
        task.wait(0.5)
    end
end)

local hopBtn,hopGet = createToggle(teleportPage,"Server Hop",false)
spawn(function()
    while true do
        if hopGet() then
            game:GetService("TeleportService"):Teleport(game.PlaceId,player)
        end
        task.wait(5)
    end
end)

-- ----------------------
-- MISC PAGE CONTROLS (AFK/ESP etc)
-- ----------------------
local afkBtn,afkGet = createToggle(miscPage,"Anti AFK",true)
Players.LocalPlayer.Idled:Connect(function()
    if afkGet() then VirtualUser:CaptureController(); VirtualUser:ClickButton2(Vector2.new()) end
end)

-- Activate first tab by default
tabs["Player"]:MouseButton1Click()
